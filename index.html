<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Index des fichiers du projet | Synapsion Energie Group</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
  <style>
    .weather-widget {
      background: rgba(0,31,84,0.13);
      border-radius: 14px;
      padding: 18px 24px;
      margin: 30px auto 0 auto;
      max-width: 360px;
      color: #fff;
      text-align: center;
      box-shadow: 0 4px 32px #003ea822;
      font-size: 1.15em;
      min-height: 80px;
      transition: background 0.2s;
    }
    .weather-widget .city {
      font-size: 1.12em;
      color: #ffd700;
      font-weight: bold;
      margin-bottom: 6px;
      letter-spacing: 0.5px;
    }
    .weather-widget .desc {
      font-size: 0.98em;
      color: #eee;
      margin-bottom: 4px;
    }
    .weather-widget .temp {
      font-size: 1.38em;
      margin-bottom: 8px;
      color: #fff;
      font-weight: bold;
      letter-spacing: 1px;
    }
    .weather-widget .icon {
      width: 46px;
      vertical-align: middle;
      margin-bottom: 6px;
    }
  </style>
</head>
<body>
  <header>
    <div class="title">Index de tous les fichiers</div>
    <div style="color:#aaa">Synapsion Energie Group — Projet</div>
  </header>
  <main>
    <h2>Liste des fichiers du projet</h2>
    <ul class="file-list">
      <li><a href="apropos.html" target="_blank">apropos.html</a></li>
      <li><a href="contact.html" target="_blank">contact.html</a></li>
      <li><a href="express-security.js" target="_blank">express-security.js</a></li>
      <li><a href="init.sql" target="_blank">init.sql</a></li>
      <li><a href="news-feed.html" target="_blank">news-feed.html</a></li>
      <li><a href="script.js" target="_blank">script.js</a></li>
      <li><a href="secure-index.html" target="_blank">secure-index.html</a></li>
      <li><a href="secure-index.js" target="_blank">secure-index.js</a></li>
      <li><a href="secure-style.css" target="_blank">secure-style.css</a></li>
      <li><a href="server.js" target="_blank">server.js</a></li>
      <li><a href="services.html" target="_blank">services.html</a></li>
      <li><a href="style.css" target="_blank">style.css</a></li>
      <li><a href="theme-toggle.js" target="_blank">theme-toggle.js</a></li>
      <li><a href="visitor-analytics.js" target="_blank">visitor-analytics.js</a></li>
      <li><a href="webgl-button.js" target="_blank">webgl-button.js</a></li>
    </ul>
    <section class="weather-widget" id="weather-widget">
      Chargement de la météo...
    </section>
  </main>
  <footer>
    © 2025 Synapsion Energie Group — Tous droits réservés.
  </footer>
  <script>
    // Hava durumu API entegrasyonu (Open-Meteo, API key gerekmez)
    // Paris örnek: lat=48.8566, lon=2.3522
    const cityName = "Paris";
    const lat = 48.8566;
    const lon = 2.3522;
    const widget = document.getElementById('weather-widget');
    fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&timezone=Europe%2FParis`)
      .then(r => r.json())
      .then(data => {
        if (!data.current_weather) {
          widget.innerHTML = "Impossible d'obtenir les données météo.";
          return;
        }
        const weather = data.current_weather;
        // Sıcaklık ve hava durumu kodunu işle
        const temp = Math.round(weather.temperature);
        const desc = getWeatherDesc(weather.weathercode);
        const icon = getWeatherIcon(weather.weathercode);
        widget.innerHTML = `
          <div class="city">${cityName}</div>
          <div class="temp">${temp}&deg;C <img class="icon" src="${icon}" alt=""></div>
          <div class="desc">${desc}</div>
        `;
      })
      .catch(() => {
        widget.innerHTML = "La météo n'a pas pu être chargée.";
      });

    // Open-Meteo weather codes için açıklamalar (Fransızca)
    function getWeatherDesc(code) {
      switch (code) {
        case 0: return "Ciel dégagé";
        case 1: case 2: case 3: return "Partiellement nuageux";
        case 45: case 48: return "Brouillard";
        case 51: case 53: case 55: return "Bruine";
        case 61: case 63: case 65: return "Pluie";
        case 71: case 73: case 75: return "Chute de neige";
        case 80: case 81: case 82: return "Averses";
        case 95: return "Orage";
        default: return "Conditions inconnues";
      }
    }
    // Basit hava durumu ikonları (ücretsiz ikonlar, PNG)
    function getWeatherIcon(code) {
      // PNG ikonları: https://basmilius.github.io/weather-icons/
      if (code === 0) return "https://basmilius.github.io/weather-icons/production/fill/all/clear-day.svg";
      if ([1,2,3].includes(code)) return "https://basmilius.github.io/weather-icons/production/fill/all/partly-cloudy-day.svg";
      if ([45,48].includes(code)) return "https://basmilius.github.io/weather-icons/production/fill/all/fog.svg";
      if ([51,53,55].includes(code)) return "https://basmilius.github.io/weather-icons/production/fill/all/drizzle.svg";
      if ([61,63,65].includes(code)) return "https://basmilius.github.io/weather-icons/production/fill/all/rain.svg";
      if ([71,73,75].includes(code)) return "https://basmilius.github.io/weather-icons/production/fill/all/snow.svg";
      if ([80,81,82].includes(code)) return "https://basmilius.github.io/weather-icons/production/fill/all/showers.svg";
      if (code === 95) return "https://basmilius.github.io/weather-icons/production/fill/all/thunderstorms.svg";
      return "https://basmilius.github.io/weather-icons/production/fill/all/cloudy.svg";
    }
  </script>
</body>
</html>
